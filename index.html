<!DOCTYPE html>
<html>
<head>
    <title>URL Shortener</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="hero">
        <div class="text">
            <h1>Shorter Links, Greater Results</h1>
            <p>Get your URL shorter with us. No more long text</p>
        </div>
        <div class="image">
            <img src="https://alokverma-uiproject-13.netlify.app/assets/SAAS%20landing%20page/30495%20[Converted]-01(1).svg"
                alt="hero_image">
        </div>
    </div>
    <form action="/shorten" method="POST">
        <div class="input">
            <input type="text" id="originalURL" name="originalURL" required>
            <button type="submit">Shorten URL</button>
        </div>
        <div class="shortened-url">
            <div id="shortenedURLDIV">
                <p id="shortenedURL"></p>
                <button id="copy" onclick="copyText()">Copy</button>
            </div>
        </div>
    </form>


    <script>
        const form = document.querySelector('form');
        const shortenedURLElement = document.getElementById('shortenedURL');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const originalURL = document.getElementById('originalURL').value;
            const response = await fetch('/shorten', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ originalURL })
            });

            if (response.ok) {
                const data = await response.json();
                const newURLLink = document.createElement('a');
                newURLLink.href = data.NewURL;
                newURLLink.textContent = data.NewURL;
                shortenedURLElement.appendChild(newURLLink);
            } else {
                shortenedURLElement.textContent = 'Error shortening URL';
            }
        });
        function copyText() {
            var URL = document.getElementById("shortenedURL");
            const res = navigator.clipboard.writeText(URL.innerText);
        }
    </script>
</body>
</html>